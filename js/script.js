var app=angular.module("BookApp",["ui.bootstrap"]);app.factory("Books",["$http",function(e){return{get:function(o){return e.get("https://www.googleapis.com/books/v1/volumes?maxResults=40&fields=items(volumeInfo(title,authors,publishedDate,description,imageLinks,previewLink))&q=inauthor:"+o)}}}]),app.controller("bookController",["$scope","$location","$http","$log","Books",function(e,o,t,a,r){function s(o){var t=e.books.items.slice((o-1)*e.pagination.itemsPerPage,o*e.pagination.itemsPerPage);e.booksPage=t}e.books={},e.booksPage=[],e.formData={},e.loading=!1,e.loaded=!1,e.pagination={currentPage:1,totalItems:0,itemsPerPage:10},e.pageChanged=function(){s(e.pagination.currentPage)},e.bookSearch=function(){e.loading=!0,searchTerm='"'+encodeURIComponent(e.formData.searchTerm)+'"',searchTerms=[],r.get(searchTerm).success(function(o){e.books=o,e.pagination.totalItems=e.books.items.length,e.pagination.currentPage=1,s(e.pagination.currentPage),e.loaded=!0,e.loading=!1}),sessionStorage.searchTerms&&(searchTerms=sessionStorage.getItem("searchTerms").split(",")),searchTerms.push(searchTerm),sessionStorage.setItem("searchTerms",searchTerms)},e.authorClick=function(o){e.formData.searchTerm=o,e.bookSearch()}}]).directive("focus",["$timeout",function(e){return{scope:{trigger:"@focus"},link:function(o,t){o.$watch("trigger",function(o){"true"===o&&e(function(){t[0].focus()})})}}}]);